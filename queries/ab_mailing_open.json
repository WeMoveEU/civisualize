{"query":"
(select mailing_id,  unix_timestamp(date*100) as sent, count(*) as count 
from(
select mailing_id, contact_id,min(time_stamp)/100 as date, count(*) as count 
  from civicrm_mailing_event_opened 
  join civicrm_mailing_event_queue q on event_queue_id=q.id 
  join civicrm_mailing_job j on q.job_id=j.id and j.is_test=false 
  join civicrm_mailing_abtest ab on ab.id=%1 and mailing_id_a=j.mailing_id
group by contact_id order by time_stamp
) t group by FLOOR(date /100)
) union
(select mailing_id,  unix_timestamp(date*100) as sent, count(*) as count 
from(
select mailing_id, contact_id,min(time_stamp)/100 as date, count(*) as count 
  from civicrm_mailing_event_opened 
  join civicrm_mailing_event_queue q on event_queue_id=q.id 
  join civicrm_mailing_job j on q.job_id=j.id and j.is_test=false 
  join civicrm_mailing_abtest ab on ab.id=%1 and mailing_id_b=j.mailing_id
group by contact_id order by time_stamp
) o group by FLOOR(date /100)
)
","params":{"1":{"name":"ab_id","type":"Integer"}}}
